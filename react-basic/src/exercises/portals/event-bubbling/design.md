# 設計メモ

## 挙動の確認結果

### ボタンをクリックしたときのイベントの流れ

* 「モーダルを開く」押下
* コンソール出力→「モーダルを開く」ボタン clicked
* コンソール出力→親コンテナ clicked


### オーバーレイをクリックしたときの挙動

* オーバーレイをクリック
* コンソール出力→オーバーレイ clicked
* コンソール出力→親コンテナ clicked



### DOMベースのバブリングだった場合との違い

DOMベースのバブリングであれば、document.bodyへとイベントが伝播されるので、ログは何も出力されないが、Reactツリーベースのバブリングでは、親コンポーネントのイベントに電波するので、モーダル上のイベントが発火すると、親コンポーネントのイベントも発火する。


## 追加課題: イベント伝播の制御

### 方針

モーダルの背景をクリックした時のイベントにstopPropagationを追加


### 修正箇所

```ts
onClick={(e) => {
        addLog("オーバーレイ clicked");
        e.stopPropagation();
        onClose();
      }}
```

---

## 評価コメント

挙動の確認が正確に行われており、DOMベースとReactツリーベースのバブリングの違いを理解されています。

追加課題の`stopPropagation()`による伝播制御も正しく実装されています。さらに、モーダル本体にも`stopPropagation()`を追加してオーバーレイへの伝播を止めているのは良い判断です。

**完了とします。**
