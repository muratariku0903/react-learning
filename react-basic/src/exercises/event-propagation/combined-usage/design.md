# 設計メモ

## 実装方針

<!-- 各リンクでどのメソッドを使うか、なぜそうするかを記述してください -->

### 「プロフィール」「設定」リンク
ページ遷移をさせないように、preventDefaultを使用する


### 「ダッシュボード」リンク
ページ遷移をさせたいので、preventDefaultを使用しない

---

### 評価コメント

設計意図と実装の `preventDefault` の使い分けは正しく一致している。ただし、以下の点について考えてみてください。

**追加質問:** 今回の実装では `stopPropagation()` を使っていませんが、要件2の「メニューを閉じる前にコンソールに遷移先を表示する」という順序は保証されていますか？ 現在の実装で `handleMenuItemClick` 内の `console.log` と `setIsMenuOpen(false)` が実行された後、`document` のクリックイベント（`handleDocumentClick`）も発火しますが、これは問題にならないでしょうか？ design.md にこの点についての考察も追記してください。  
  

今回の場合は問題にはならず、要件を満たせます。なぜなら、まず最初に小要素のイベントが実行されてから、親要素のイベントが実行されるので、ログ出力→メニュクローズの順番は守られます。ただ、親イベントを設定してる箇所で、キャプチャ設定をカスタムしていた場合は、先に親イベントが実行されるケースがあるので、その場合は`stopPropagation()`を使用する必要があります。

---

### 再評価コメント

正しい。バブリングフェーズでは子要素のハンドラが先に実行されるため、`console.log` → `setIsMenuOpen(false)` の順序は保証される。キャプチャフェーズに言及している点もよい。この理解があれば、`stopPropagation()` を使う/使わないの判断を自信を持ってできる。問題なし。
