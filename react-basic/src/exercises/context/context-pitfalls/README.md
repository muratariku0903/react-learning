# Contextの落とし穴とパフォーマンス

## 目的

Contextの「向いている用途」「向いていない用途」を理解し、パフォーマンス上の注意点を学ぶ。

---

## 言語化演習

### 質問1
ロードマップには「Contextは頻繁に変わらないが、多くの場所で使う値に向いている」と書かれています。では、なぜ「頻繁に変わる値」にはContextが向いていないのでしょうか？Reactの再レンダリングの仕組みと関連づけて説明してください。

### 質問2
以下のうち、Contextに適しているものと適していないものを分類し、その理由を説明してください。

- ログインユーザー情報
- マウスの座標（mousemoveで更新）
- ダークモード/ライトモードの設定
- フォームの入力値（複数フィールド）
- アプリの言語設定（日本語/英語）
- リアルタイム更新されるチャットメッセージ一覧

### 質問3
「Context = グローバルState管理」がアンチパターンになりやすい理由を、3つ挙げて説明してください。

---

## 実装演習

### 課題

現在の`App.tsx`には、Contextの使い方として問題がある実装があります。

#### 要件

1. コードを読んで、どのような問題があるか`design.md`に分析結果を記録する
2. 「カウンター」ボタンをクリックしたとき、`UserInfo`コンポーネントも再レンダリングされるか確認する（console.logで確認）
3. なぜそうなるのか、`design.md`に理由を記述する
4. 可能であれば、この問題を軽減する方法を考えて実装する（ヒントを参照）

#### 確認方法

1. ブラウザの開発者ツールでConsoleを開く
2. 「+1」ボタンをクリック
3. どのコンポーネントが再レンダリングされたかログを確認

---

## ヒント

- Contextの値が変わると、そのContextを購読している全コンポーネントが再レンダリングされます
- 「1つのContextに全部入れる」vs「用途別にContextを分ける」を考えてみましょう
- `useMemo`や`useCallback`で解決できる問題とできない問題があります
