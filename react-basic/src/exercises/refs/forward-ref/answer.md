# forwardRef - 回答

## 問1: なぜforwardRefが必要なのか

親コンポーネントから子コンポーネントのDOMにアクセスするため。  
例の実装では、親で定義されたrefを関数コンポーネントで「ref」として受け取ろうとしているが、
この「ref」は「key」みたく、コンポーネントに予め用意されたpropsであり、子コンポーネント内で利用することはできないため。



---

## 問2: forwardRefの役割

forwardRefを使うことで、親からrefをpropsとして受け取ることができるようになり、問1で発生した問題が解消される。  
forwardRefの第二引数で渡ってきたrefは親から渡されたrefを意味する。


---

## 問3: forwardRefを使うべき場面

### 場面1:
親コンポーネントから子コンポーネントのDOMに直接アクセスしたいとき。
- 説明:refを小コンポーネントとのpropsとして渡す必要があるから。

### 場面2:
ラッパーコンポーネントを用意した際に、ラッパーの呼び出し先からラッパー内の要素にrefを中継できるようにするため。
- 説明:通常関数コンポーネントでは、そのままrefを渡すと、propsとしてアクセスすることができず、内部のinput要素などにrefを渡すことができないが、forwardRefを使うことで、propsとしてrefを受け取ることができる。

### 場面3:
親から子コンポーネントのDOMを操作する際に、操作を限定的にしたいケース。
- 説明:useImperativeHandleを使うことで、親から操作できるDOMを自分で定義したAPIにオーバーライドすることができ、これによって、親から予想外のDOM操作をされることによる事故を減らすことができる。

---

## 評価コメント（2026/01/26）

### 問1・問2: ✅ 正しい
`ref`が`key`と同様に特別扱いされる点、`forwardRef`で第2引数としてrefを受け取れる点を正確に理解されています。

### 問3: ✅ 概ね正しい
場面3の`useImperativeHandle`との組み合わせは良い視点です。

補足として、場面1と場面2は本質的に同じ（refを転送する）ユースケースです。より具体的なユースケースとしては以下があります：
- **フォーカス管理**: フォーム入力やモーダルでのフォーカス制御
- **スクロール制御**: 特定の要素へのスクロール
- **アニメーション**: サードパーティのアニメーションライブラリとの連携
- **再利用可能なUIライブラリ**: ButtonやInputなど、DOM要素をラップするコンポーネント作成時

**評価完了**
