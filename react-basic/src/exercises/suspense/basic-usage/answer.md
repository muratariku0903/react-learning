# 言語化演習の回答

## 1. 従来のローディング管理とSuspenseの考え方の違い

<!--
「誰が」「何を」管理するのかという観点で説明してください。
-->
`useState` + `useEffect` によるローディング管理では、実装者がローディング状態を管理するのに対して、Suspenseを使った場合では、React側にローディング状態の管理を任せる方針となる。

✅ 正しい理解です。補足すると、従来のパターンでは「命令的」に状態を変更（setLoading(false)など）していたのに対し、Suspenseでは「宣言的」にローディングUIを定義するという違いもあります。また、従来パターンでは各コンポーネントにローディング管理が分散しがちでしたが、Suspenseを使うと親コンポーネントでまとめて管理できる点も重要です。



## 2. React.lazy() の役割とSuspenseとの組み合わせ

<!--
React.lazy()を使うと何が起こるのか、
なぜSuspenseと組み合わせる必要があるのかを説明してください。
-->
React.lazy()を使うと、コンポーネントの読み込みを初回読み込み別に切り出すことができる。そうすることで、初回画面の表示を高速化することが可能。インポートしてる最中はコンポーネントを表示できる状態ではないので、表示できる状態になるまではSuspenseにてローディング状態を管理する必要がある。

✅ 正しい理解です。具体的には、React.lazy()は内部で動的インポート（import()）を使い、別のJavaScriptチャンクとしてファイルを分割します（コード分割）。これにより初期バンドルサイズを小さくできます。Suspenseが必要な理由は、lazyコンポーネントがまだ読み込まれていないときにPromiseをthrowするため、それをキャッチしてfallbackを表示する仕組みが必要だからです。



## 3. 「Promiseをthrowする」の意味

<!--
Suspenseの内部動作について説明してください。
通常のtry-catchとの違いも踏まえて説明してください。
-->
コンポーネントがまだ表示できる状態でない場合はその合図としてPromiseをスローし、それをSuspenseが検知しローディング画面を表示する。通常のtry-catchで例外スローされた場合は、ErrorBoundaryがそれを検知し、登録されたエラー用のコンポーネントを表示する。

✅ 概ね正しい理解です。補足すると、「Promiseをthrowする」というのはJavaScriptの通常の例外処理とは異なる特殊な使い方です。通常のtry-catchはErrorオブジェクトをキャッチしますが、Suspenseはレンダリング中にthrowされたPromiseを特別に検知します。Promiseがresolveするまでfallbackを表示し、resolveしたら再レンダリングを行います。これは「React独自の制御フロー」であり、開発者が直接throw new Promise()を書くことは推奨されていません（ライブラリが内部で行います）。

