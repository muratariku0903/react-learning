# useTransition / startTransition と Suspense

## 目的

この演習では、`useTransition` / `startTransition` と Suspense を組み合わせて、
より良いユーザー体験を実現する方法を学びます。
「急いで反映したい更新」と「後回しでも良い更新」を分けて扱う考え方を身につけましょう。

## 背景

React 18 では、状態更新の「優先度」を制御できる API が追加されました。

- **startTransition**: 更新を「後回しでも良い」とマークする
- **useTransition**: 上記に加えて、遅延中かどうか（`isPending`）を取得できる

例えば検索フォームでは：
- **入力欄の更新**: すぐに反映したい（タイピングが引っかかると不快）
- **検索結果の更新**: 少し遅れても良い（重い処理）

この2つを分けることで、入力中も画面がサクサク動くUIを実現できます。

---

## 要件

### 言語化演習

以下の質問に `answer.md` で回答してください。

1. `startTransition` でラップした更新は、どのような特性を持ちますか？ラップしない更新と何が違いますか？

2. `useTransition` が返す `isPending` は何を表していますか？これを使うとどのようなUXの改善ができますか？

3. Suspense と `useTransition` を組み合わせると、ローディング表示の挙動はどうなりますか？Suspense単体の場合と比較して説明してください。

---

### 実装演習

現在の `App.tsx` には、検索フォームと検索結果を表示するUIがあります。
入力するたびに検索結果が更新されますが、入力が重く感じられます。

`useTransition` を使って、入力はサクサク、結果更新は後回しにする実装に改善してください。

#### やること

1. `design.md` に設計メモを記載する
   - どの状態更新を transition でラップするか
   - `isPending` をどのようにUIに反映するか

2. 以下を実装する
   - `useTransition` を使って検索結果の更新を遅延させる
   - `isPending` を使って、更新中であることを視覚的に表示する
   - 入力欄はスムーズに動作するようにする

#### 現状の問題

現在の実装では、入力のたびに重い検索結果コンポーネントが同期的に更新されます。
これにより、タイピングがもたつく場合があります。

---

## 制約条件

- 入力欄の値は即時反映すること（遅延させない）
- `debounce` や `throttle` は使わないこと（transition で解決する）

---

## ヒント

- 状態を2つに分けて考えましょう：「入力欄用」と「検索用」
- `isPending` が `true` の間は、結果部分を薄く表示するなどの工夫ができます
- DevToolsで CPU スロットリングを有効にすると、効果がわかりやすくなります
