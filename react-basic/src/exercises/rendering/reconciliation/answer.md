# 言語化演習の回答

## 1. Reconciliationとは何か、なぜ必要か

<!-- ここに回答を記述してください -->
* 旧Fiberツリーと新Fiberツリーの差分を検出すること。
* 差分を検出することによって変更が入った箇所に絞ってDOMを更新できる。
* 差分検出の仕組みがない場合、毎回全てのDOMを作り直す必要があり、パフォーマンスの観点で好ましくない。


## 2. 「仮想DOM」の本質と「仮想DOMだから速い」の問題点

<!-- ここに回答を記述してください -->
* 仮想DOMの本質はコンポーネントの計算結果であり、Fiberツリーを構築するための設計図
* 仮想DOMだから早いのではなく、差分更新をするから早い
  * つまり、適切に差分を検出できるコンポーネント設計をしないとパフォーマンスは期待できない
- 質問2について：「適切に差分を検出できるコンポーネント設計」の具体例を考えてanswer.mdに追記してください
* 以下2点
  * 不適切なkeyをリスト要素に設定せず、安定した値をキーに設定する
```js
/ 悪い例（毎回keyが変わる）
{todos.map((todo) => (
  <TodoItem key={crypto.randomUUID()} todo={todo} />
))}

// 良い例（stable key）
{todos.map((todo) => (
  <TodoItem key={todo.id} todo={todo} />
))}
```
  * タグを動的に変えない
```js
// 悪い例（typeが div <-> span で変わる）
return isInline ? <span>{text}</span> : <div>{text}</div>;

// 良い例
return isInline ? <div>{text}</div> : <div>{text}</div>;
```


## 3. Reactの差分計算における2つの重要なルール

<!-- ここに回答を記述してください -->
* 同じ階層で、要素の type が違えば、基本的にそのサブツリーは作り直す
* リストは key が一致するものを同一として扱う
