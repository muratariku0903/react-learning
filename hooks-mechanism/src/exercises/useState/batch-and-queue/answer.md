# 言語化演習 回答

## 質問1の回答

クリック後のcountの値：

1

理由：

全てのセッター処理がバッチ更新としてReactにスケジュールされるが、いずれもパラメータに渡してる値は「１（参照されるcountが0なので）」であるので、常に同じ値で更新してることになる。  
つまり、一回ごとに呼び出しで即座にステートが更新されるわけではない。

---

## 質問2の回答

修正後のコード：

```tsx
function Counter() {
  const [count, setCount] = useState(0);

  function handleClick() {
    setCount((prev) => prev + 1);
    setCount((prev) => prev + 1);
    setCount((prev) => prev + 1);
  }

  return <button onClick={handleClick}>+3?</button>;
}
```

なぜ正しく動くか：

「前回のstateを受け取りその値に+1をする」と言う更新処理をキューに３つ登録し、後のバッチ処理でキューに投下された更新関数のパラメーターとして更新されていくstateをセットして実行されていくことで、値が積み上がっていくため。

---

## 質問3の回答

console.logに出力される値：

0

なぜその値になるか：

イベントないの処理が全て完了したのちに、裏側でバッチ処理が実施され、そこで実際にcountが更新されるので、イベント内で参照される「count」は更新前の値となるため0となる。

---

## 評価コメント（完了）

すべての回答が正確です。「setStateは即座に値を変えず、更新をキューに積んでバッチ処理する」という核心を理解し、updater関数 `(prev) => prev + 1` を使うことで「前のstateを元に次のstateを計算する」安全なパターンを正しく習得しています。
